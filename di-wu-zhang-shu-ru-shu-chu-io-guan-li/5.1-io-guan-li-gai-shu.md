# 5.1 I/O管理概述

## 5.1.1 I/O设备

### 1、相关基础知识

I/O设备就是可以将数据输入或者可以接收计算机输出数据的外部设备，属于计算机中的硬件部件。

按照**使用特征**，I/O设备可以分为以下几类：

* 人机交互设备
* 存储设备
* 网络通信设备

按照**传输速度**，I/O设备可以分为以下几类：

* 低速设备：键盘鼠标等
* 中速设备：打印机等
* 高速设备：硬盘等

按照**信息交互的单位**，I/O设备可以分为以下几类：

* 块设备
  * 以数据块为单位进行信息交互
  * 读取速度快
  * 可寻址（可以随机的读写任意一块）
* 字符设备
  * 传输的基本单位是字符
  * 读取速度慢
  * 不可寻址
  * 输入输出采用中断驱动方式

### 2、I/O设备的电子部件（I/O控制器）

I/O设备的机械部分就是具体的执行机构，例如键盘的机械轴、硬盘的磁头、盘片等。

CPU无法直接控制I/O设备的机械部件，因此I/O设备还要有一个电子部件用于实现CPU对设备的控制。 这个电子部件就是**I/O控制器**，又称**设备控制器**。CPU可控制I/O控制器，又由I/O控制器来控制设备的机械部件。

#### （1）I/O控制器的功能

* 接收和识别CPU发出的命令
  * 通过I/O控制器中的**控制寄存器**来存放相应指令和参数
* 向CPU报告设备的状态
  * 通过I/O控制器中的**状态寄存器**记录当前I/O设备的状态
* 数据交换
  * 通过I/O控制器中的**数据寄存器**暂存准备传入或传出的数据
* 地址识别

#### （2）I/O控制器的组成

![](../.gitbook/assets/image%20%281%29.png)

* CPU与控制器的接口（图中左半部分整体）
  * CPU通过控制线发出命令
  * 通过地址线指明要操作的设备
  * 通过数据线存/取数据
* I/O逻辑
  * 接收和识别CPU发来的各种指令
  * 对设备发出指令
* 控制器与设备的接口
  * 用于实现控制器与设备之间的通道
  * 数据线传输数据
  * 状态线向控制器反馈当前设备状态
  * 控制器通过控制线向相应的设备发送控制信号

{% hint style="warning" %}
1. 由于一个I/O控制器可能连接多个I/O设备，因此数据寄存器、状态寄存器、控制寄存器的数量也可能会有多个（一个设备对应一个）
2. 这些寄存器都需要有相应的地址以便CPU寻址操作。其中
   * 有的计算机会让这些寄存器占用内存地址的一部分，称为**内存映像I/O**
     * 控制器中断寄存器与内存地址统一管理
     * 简化了指令，可以采用操作内存的指令来操作控制器 ✔
   * 另一些计算机则采用I/O专用地址，即**寄存器独立编址**
     * 控制器中的寄存器使用单独的地址
     * 需要设置专门的指令来操作控制器 ❌
     * 不仅需要指明寄存器地址，还要指明控制器编号 ❌
{% endhint %}

## 5.1.2 I/O控制方式

### 1、程序直接控制方式



