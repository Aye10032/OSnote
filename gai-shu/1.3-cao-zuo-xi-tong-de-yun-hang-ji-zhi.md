# 1.3 操作系统的运行环境

## 一、操作系统的运行机制

## 1、内核态和用户态

在计算机中存在两种程序，系统外层的**应用程序**和**内核程序**。

CPU在设计时存在**特权指令**与**非特权指令**，特权指令例如IO指令，内存指令等。

实际上，CPU存在“**内核态**”与“**用户态**”两种状态。

* 内核态：此时运行的是**内核程序**，可以执行特权指令
* 用户态：此时运行的是**应用程序**，只能执行非特权指令

{% hint style="info" %}
CPU中存在一个**程序状态字寄存器**（PSW），其二进制位1表示“内核态”，0表示“用户态”。

另外，内核态也叫做“核心态”或“管态”，用户态也叫做“目态”。
{% endhint %}

内核是操作系统最重要最核心的部分，许多的内核程序组成了操作系统内核。

### 2、内核态和用户态的转换

**内核态→用户态**：执行一条特权指令——修改PSW的标志位为“用户态”，这个动作意味着操作系统将主动让出CPU使用权 。

**用户态→内核态**：由“中断”引发，硬件自动完成变态过程，触发中断信号意味着操作系统将强行夺回CPU的使用权。

## 二、中断和内核

