# 1.4 操作系统的体系结构

![&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;](../.gitbook/assets/qq-jie-tu-20210628165443.png)

一般来说，底层的时钟管理、中断处理、原语等与硬件关系紧密；而上层的进程管理、存储器管理、设备管理等处理数据结构等相关，与硬件关系不大。

{% hint style="info" %}
转变CPU状态的过程是有成本的，要消耗不少时间，频繁地转变CPU状态会降低系统性能
{% endhint %}

## 1、大内核

这两层都在内核态下运行

* 优点
  * 性能高
* 缺点
  * 代码庞大
  * 结构混乱

## 2、微内核

只有底层保留在内核态下运行，运行时不断切换CPU状态

* 优点
  * 内核功能少
  * 结构清晰，方便维护
* 缺点
  * 需要频繁的切换CPU状态，性能低



## 3、操作系统引导

1. 激活CPU
2. 读取ROM中的boot指令，开始执行BIOS程序
3. 硬件自检
4. 加载带有操作系统的硬盘，将引导扇区的内容加载进内存
5. 加载主引导记录MBR
6. 扫描硬盘分区表，并加载硬盘活动分区
7. 加载分区引导记录PBR：活动分区的第一个扇区，用于寻找根目录下的引导程序（启动管理器）
8. 加载启动管理器
9. 加载操作系统
